{"version":3,"sources":["../../../src/index.js"],"names":["Context","React","createContext","MediaContext","Consumer","MqlProvider","props","dev","state","handlerMap","subscribe","bind","unSubscribe","name","handler","console","log","e","media","matches","setState","currentMatches","Object","keys","list","map","mqObj","window","matchMedia","m","handlerObj","getHandler","addListener","removeListener","length","children","Component","Media","other","v"],"mappings":"u0BAOA,4B,8xCACA,GAAMA,SAAUC,gBAAMC,aAAN,EAAhB,CACO,GAAMC,mCAAeH,QAAQI,QAA7B,C,GAEDC,Y,oEAML,qBAAaC,KAAb,CAAoB,mJACbA,KADa,GAEnB,MAAKC,GAAL,CAAW,CAAC,CAAC,MAAKD,KAAL,CAAWC,GAAxB,CACA,MAAKC,KAAL,CAAa,EAAb,CACA,MAAKC,UAAL,CAAkB,EAAlB,CACA,MAAKC,SAAL,CAAiB,MAAKA,SAAL,CAAeC,IAAf,OAAjB,CACA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBD,IAAjB,OAAnB,CANmB,YAOnB,C,sEAMWE,I,CAAM,iBACjB,MAAO,CACNC,QAAS,mBAAK,CAEb,OAAKP,GAAL,EAAYQ,QAAQC,GAAR,gBAA0BH,IAA1B,mBAAgDI,EAAEC,KAAlD,QAA8DD,EAAEE,OAAhE,CAAZ,CACA,OAAKC,QAAL,oBAAiBP,IAAjB,CAAwBI,EAAEE,OAA1B,EACA,CALK,CAMNN,SANM,CAQP,C,6CAKY,iBACZ,GAAIQ,gBAAiB,EAArB,CACAC,OAAOC,IAAP,CAAY,KAAKjB,KAAL,CAAWkB,IAAvB,EAA6BC,GAA7B,CAAiC,WAAK,CACrC,GAAMC,OAAQC,OAAOC,UAAP,CAAkB,OAAKtB,KAAL,CAAWkB,IAAX,CAAgBK,CAAhB,CAAlB,CAAd,CACA,GAAMC,YAAa,OAAKC,UAAL,CAAgBF,CAAhB,CAAnB,CACAH,MAAMM,WAAN,CAAkBF,WAAWhB,OAA7B,EAEA,OAAKP,GAAL,EAAYQ,QAAQC,GAAR,gBAA0Ba,CAA1B,qBAA+C,OAAKvB,KAAL,CAAWkB,IAAX,CAAgBK,CAAhB,CAA/C,CAAZ,CACAR,eAAeQ,CAAf,EAAoBH,MAAMP,OAA1B,CACA,OAAKV,UAAL,CAAgBoB,CAAhB,EAAqB,CAAEC,WAAYA,UAAd,CAA0BJ,WAA1B,CACrB,CARD,EASA,KAAKN,QAAL,CAAcC,cAAd,CACA,C,iDAKc,iBACdC,OAAOC,IAAP,CAAY,KAAKd,UAAjB,EAA6BgB,GAA7B,CAAiC,WAAK,CACrC,OAAKhB,UAAL,CAAgBoB,CAAhB,EAAmBH,KAAnB,CAAyBO,cAAzB,CAAwC,OAAKxB,UAAL,CAAgBoB,CAAhB,EAAmBC,UAAnB,CAA8BhB,OAAtE,EAEA,OAAKP,GAAL,EAAYQ,QAAQC,GAAR,gBAA0Ba,CAA1B,uBAAiD,OAAKpB,UAAL,CAAgBoB,CAAhB,EAAmBH,KAAnB,CAAyBR,KAA1E,CACZ,CAJD,EAKA,KAAKT,UAAL,CAAkB,EAClB,C,6DAEoB,CACpB,KAAKH,KAAL,CAAWkB,IAAX,EAAmB,QAAQ,KAAKlB,KAAL,CAAWkB,IAAnB,IAA6B,QAAhD,EAA4D,KAAKd,SAAL,EAC5D,C,mEAEuB,CACvB,KAAKE,WAAL,EACA,C,uCAES,CACT,GAAIU,OAAOC,IAAP,CAAY,KAAKf,KAAjB,EAAwB0B,MAAxB,GAAmC,CAAvC,CAA0C,CACzC,MAAO,+BAAC,OAAD,CAAS,QAAT,EAAkB,MAAO,KAAK1B,KAA9B,EACL,KAAKF,KAAL,CAAW6B,QADN,CAGP,CAJD,IAIO,CACN,MAAO,MAAK7B,KAAL,CAAW6B,QAClB,CACD,C,wBA3EwBlC,gBAAMmC,S,EA8EhC,GAAMC,OAAQ,QAARA,MAAQ,CAAC/B,KAAD,CAAW,IAClB6B,SADkB,CACK7B,KADL,CAClB6B,QADkB,CACLG,KADK,0BACKhC,KADL,eAExB,GAAI6B,UAAY,MAAQA,SAAR,GAAsB,UAAtC,CAAkD,CACjD,MAAO,+BAAC,WAAD,CAAiBG,KAAjB,CACN,8BAAC,YAAD,MACG,kBAAKC,IAAKJ,SAASI,CAAT,CAAV,CADH,CADM,CAKP,CAND,IAMO,CACN,MAAO,KACP,CACD,CAXD,C,gBAaeF,K","file":"index.js","sourcesContent":["/**\n * Copyright (c) 2018-present, Kumar Abhishek.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nconst Context = React.createContext();\nexport const MediaContext = Context.Consumer;\n\nclass MqlProvider extends React.Component {\n\n\t/**\n   * Constructor for MqlProvider\n   * @param {Object} props\n   */\n\tconstructor (props) {\n\t\tsuper(props);\n\t\tthis.dev = !!this.props.dev;\n\t\tthis.state = {};\n\t\tthis.handlerMap = {};\n\t\tthis.subscribe = this.subscribe.bind(this);\n\t\tthis.unSubscribe = this.unSubscribe.bind(this);\n\t}\n\n\t/**\n   * Get a media_query_list handler closure of given `name`\n   * @param {string} name\n   */\n\tgetHandler (name) {\n\t\treturn {\n\t\t\thandler: e => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tthis.dev && console.log(`react-mql('${name}): matches for ${e.media} is ${e.matches}`);\n\t\t\t\tthis.setState({ [name]: e.matches });\n\t\t\t},\n\t\t\tname\n\t\t};\n\t}\n\n\t/**\n   * Subscribe for MediaQueryList\n   */\n\tsubscribe () {\n\t\tlet currentMatches = {};\n\t\tObject.keys(this.props.list).map(m => {\n\t\t\tconst mqObj = window.matchMedia(this.props.list[m]);\n\t\t\tconst handlerObj = this.getHandler(m);\n\t\t\tmqObj.addListener(handlerObj.handler);\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tthis.dev && console.log(`react-mql('${m}): subscribed to ${this.props.list[m]}`);\n\t\t\tcurrentMatches[m] = mqObj.matches;\n\t\t\tthis.handlerMap[m] = { handlerObj: handlerObj, mqObj };\n\t\t});\n\t\tthis.setState(currentMatches);\n\t}\n\n\t/**\n   * Un-subscribe for MediaQueryList\n   */\n\tunSubscribe () {\n\t\tObject.keys(this.handlerMap).map(m => {\n\t\t\tthis.handlerMap[m].mqObj.removeListener(this.handlerMap[m].handlerObj.handler);\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tthis.dev && console.log(`react-mql('${m}): unsubscribed to ${this.handlerMap[m].mqObj.media}`);\n\t\t});\n\t\tthis.handlerMap = {};\n\t}\n\n\tcomponentDidMount () {\n\t\tthis.props.list && typeof (this.props.list) === 'object' && this.subscribe();\n\t}\n\n\tcomponentWillUnmount () {\n\t\tthis.unSubscribe();\n\t}\n\n\trender () {\n\t\tif (Object.keys(this.state).length !== 0) {\n\t\t\treturn <Context.Provider value={this.state}>\n\t\t\t\t{this.props.children}\n\t\t\t</Context.Provider>;\n\t\t} else {\n\t\t\treturn this.props.children;\n\t\t}\n\t}\n}\n\nconst Media = (props) => {\n\tlet { children, ...other } = props;\n\tif (children && typeof (children) === 'function') {\n\t\treturn <MqlProvider {...other}>\n\t\t\t<MediaContext>\n\t\t\t\t{ v => v && children(v) }\n\t\t\t</MediaContext>\n\t\t</MqlProvider>;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport default Media;\n"]}