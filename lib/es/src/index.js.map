{"version":3,"sources":["../../../src/index.js"],"names":["Context","React","createContext","MediaContext","Consumer","MqlProvider","props","dev","state","mqlist","list","subscribe","name","handler","console","log","e","media","matches","setState","Object","keys","map","mqObj","window","matchMedia","m","handlerObj","getHandler","addListener","removeListener","unSubscribe","nextProps","enabled","length","children","Component","Media","other","undefined","v"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Copyright (c) 2018-present, Kumar Abhishek.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nconst Context = React.createContext();\nexport const MediaContext = Context.Consumer;\n\nclass MqlProvider extends React.Component {\n  \n  /**\n   * Constructor for MqlProvider\n   * @param {Object} props\n   */\n  constructor(props){\n\t\tsuper(props);\n\t\tthis.dev = !!this.props.dev;\n\t\tthis.state = {};\n\t\tthis.mqlist = {};\n\t\tprops.list && typeof(props.list) === 'object' && this.subscribe(props.list);\n  }\n\n  /**\n   * Get a media_query_list handler closure of given `name` \n   * @param {string} name \n   */\n\tgetHandler(name){\n\t\treturn {\n\t\t\thandler: e => {\n\t\t\t\tthis.dev && console.log(`react-mql('${name}): matches for ${e.media} is ${e.matches}`);\n\t\t\t\tthis.setState({ [name]: e.matches });\n\t\t\t},\n\t\t\tname\n\t\t};\n\t}\n\n  /**\n   * Subscribe for MediaQueryList\n   * @param {Object} mqlist Config object of the form { media_query_name: media_query }\n   */\n\tsubscribe(mqlist) {\n\t\tObject.keys(mqlist).map( m => {\n\t\t\tconst mqObj = window.matchMedia(mqlist[m]);\n\t\t\tconst handlerObj = this.getHandler(m);\n\t\t\tmqObj.addListener(handlerObj.handler);\n\t\t\tthis.dev && console.log(`react-mql('${m}): subscribed to ${mqlist[m]}`);\n\t\t\tthis.state[m] = mqObj.matches; // Store current matches in state\n\t\t\tthis.mqlist[m] = { handlerObj: handlerObj, mqObj };\n\t\t});\n\t}\n\n  /**\n   * Un-subscribe for MediaQueryList\n   * @param {Object} mqlist Config object of the form { media_query_name: { handlerObj: media_query_event_handler, mqObj: media_query_object } }\n   */\n\tunSubscribe(mqlist) {\n\t\tObject.keys(mqlist).map( m => {\n\t\t\tmqlist[m].mqObj.removeListener(mqlist[m].handlerObj.handler);\n\t\t\tthis.dev && console.log(`react-mql('${m}): unsubscribed to ${mqlist[m].mqObj.media}`);\n\t\t});\n\t}\n\n  componentWillUnmount () {\n\t\tthis.unSubscribe(this.mqlist);\n\t}\n\t\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif(nextProps.enabled){\n\t\t\tthis.subscribe(nextProps.list);\n\t\t} else {\n\t\t\tthis.unSubscribe(this.mqlist);\n\t\t}\n\t}\n\n  render() {\n\t\tif(this.props.enabled && Object.keys(this.mqlist).length !== 0){\n\t\t\treturn <Context.Provider value={this.state}>\n\t\t\t\t{this.props.children}\n\t\t\t</Context.Provider>;\n\t\t} else return this.props.children;\n  }\n}\n\nconst Media = (props) => {\n\tlet {children, enabled, ...other} = props;\n\tenabled = enabled === undefined || enabled;\n\tif (children && typeof(children) === 'function') {\n\t\treturn <MqlProvider {...other} enabled={enabled}>\n\t\t\t<MediaContext>\n\t\t\t\t{v => children(v)}\n\t\t\t</MediaContext>\n\t\t</MqlProvider>;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport default Media;\n"]}